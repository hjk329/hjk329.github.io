---
title:  "[객체지향의 사실과 오해] 02 이상한 나라의 객체"
categories: 
  - Books
tags:
  - OOP
  - 객체지향
toc: true
toc_sticky: true
toc_label: "이상한 나라의 객체"
share: true

---

<객체지향의 사실과 오해, 조영호 지음 / 위키북스> 2장을 읽고 정리한 내용입니다.  

`객체지향 패러다임은 지식을 추상화하고 추상화한 지식을 객체 안에 캡슐화함으로써 실세계 문제에 내재된 복잡성을 관리하려고 한다. 객체를 발견하고 창조하는 것은 지식과 행동을 구조화하는 문제다. - 레베카 워프스브록`

## 객체지향과 인지 능력
인간은 타고난 인지 능력을 이용해 세상에 존재하는 다양한 객체를 식별하고 분류함으로써 세상을 이해한다 (p.41)  

객체지향 패러다임은 인간이 인지할 수 있는 다양한 객체들이 모여 현실 세계를 이루는 것처럼 소프트웨어의 세계 역시 인간이 인지할 수 있는 다양한 소프트웨어 객체들이 모여 이뤄져 있다는 믿음에서 출발한다. (p.41)  
하지만, 객체지향 패러다임의 궁극적인 목적은 단순히 현실 세계의 모방이 아니다.  
오히려 현실 세계를 기반으로 실세계에서는 존재하지 않는 새로운 세계를 창조하는 것에 있다.

## 객체, 그리고 이상한 나라
이 책은 이상한 나라의 앨리스를 이야기로 객체지향을 설명하고 있다.  
앨리스가 액체를 마시고 키가 줄어드는 장면, 케이크를 마시고 다시 키가 커지는 장면, 부채질을 했더니 키가 줄었고, 버섯의 양쪽을 번갈아 먹으면서 키가 커졌다가 작아졌다가를 반복하다가 원래 상태의 키로 돌아갔다가, 다시 키를 줄이는 장면 등을 떠올리면 된다.  

### 앨리스 객체
이상한 나라의 앨리스 이야기를 통해 캐치할 만한 중요한 사실은 아래와 같다. 
- 앨리스는 어떠한 행동(액체를 마신다, 케이크를 먹는다, 부채질을 한다 등)을 통해 상태(키)를 변화시킨다.
- 키를 줄임으로써 낮은 문을 통과해 아름다운 정원에 들어갈 수 있었다.   
- 키가 작아지든, 커지든 사람들은 앨리스를 앨리스라 부른다. (앨리스의 상태 변화와 무관하게 유일한 존재로 식별이 가능한 존재이다.)

앨리스의 이야기는 객체지향 세계의 객체에 대입할 수 있는 몇 가지 공통점이 있다  

## 객체, 그리고 소프트웨어 나라 
객체란 상태(state)와 행동(behavior), 식별자(identity)를 지닌 실체이다.    

### 상태
#### 왜 상태가 필요한가
어떤 행동의 결과는 과거에 어떤 행동들이 일어났었느냐에 의존한다. (p.47)  
예를 들어, 앨리스가 낮은 문을 통과하기 위해서는 자신의 키를 줄여야만 했다.  
문을 통과할 수 있을지를 예측하기 위해서 앨리스가 과거에 몸을 줄일 수 있는 버섯을 먹은 적이 있는지 살펴볼 수 있겠다.  
하지만, 과거의 행동을 기반으로 현재 발생한 행동의 결과를 예측하기 위해서는 과거의 모든 행동을 기억하고 있어야 하므로 복잡하고 어렵다.  
따라서, 인간은 행동의 과정과 결과는 단순하게 기술하기 위해 상태라는 개념을 고안했다. (p.48)  

상태를 이용하면 과거의 모든 행동 이력을 기억하지 않고 있어도 행동의 결과를 쉽게 예측할 수 있기 때문이다.  
예를 들어, 앨리스의 키와 문의 높이라는 두 가지 상태를 안다면 앨리스가 과거에 어떤 행동을 했던지 기억하지 않더라도 문을 통과할 수 있을지를 예측할 수 있다.  

> 상태를 이용하면 과거에 얽매이지 않고 현재를 기반으로 객체의 행동 방식을 이해할 수 있다. (p.48)


#### 상태와 프로퍼티
> 객체의 상태를 구성하는 모든 특정일 통틀어 객체의 `프로퍼티(property)` 라고 한다. (p.50)  

단순한 값으로 객체의 상태를 표현할 수도 있지만, 객체를 사용해서 다른 객체의 상태를 표현할 수도 있다.  
예를 들어, 음료의 `양`, 앨리스의 `키`는 단순한 값일 뿐이고, 객체가 아니다.  
이러한 단순한 값(속성, attribute)들은 객체의 상태를 표현하기 위해 사용된다.  

만약 앨리스라는 객체가 음료를 들고있는 상태인지를 표현하려면 어떻게 해야 할까?  

음료는 객체이다. 상태(양)와 행동(마셔라)을 가지고, 다른 객체와 식별 가능하기 때문이다.  
음료를 들고 있는 앨리스를 표현하는 가장 간단한 방법은 앨리스의 상태 일부를 음료라는 객체를 이용해 표현하는 것이다.  
이는 객체와 객체를 서로 연결한다는 것을 의미한다.  
이처럼 객체와 객체 사이의 의미있는 연결을 `링크(link)`라고 한다. 객체와 객체 사이에는 링크가 존재해야만 요청(메시지)을 보내고 받을 수 있다. (p.51)

이처럼 단순한 값 뿐만 아니라, 다른 객체를 이용해서 앨리스라는 다른 객체를 설명할 수도 있게 된다.  
이때 앨리스 객체의 프로퍼티는 키, 위치, `음료`가 된다. 프로퍼티는 변경되지 않고 `정적`이다.    
반면에 `프로퍼티 값(property value)`는 시간의 흐름에 따라 변경되므로 `동적`이다.  

정리하자면 객체의 프로퍼티는 단순한 값인 속성과 다른 객체를 가리키는 링크라는 두 가지 종류의 조합으로 표현할 수 있다.(p.51)  

그렇다면 객체의 상태를 어떻게 변화시킬 수 있을까?  
객체지향에서 객체는 자율적인 존재이다. 이는 자신의 상태를 스스로 책임지고, 외부의 요청에 대해 어떻게 행동할지 스스로 판단한다는 의미이다.  
다르게 말하면 외부의 객체가 직접적으로 어떠한 객체의 상태를 변화시킬 수 없다. 따라서, 간접적으로 객체의 상태를 변경하거나 조회할 수 있는 방법이 필요하다.  
이것이 바로 행동이다.  

### 행동
객체의 상태를 변화시킬 수 있는 것은 객체의 자발적인 행동뿐이다.  
앨리스의 키가 작아졌던 이유는 음료를 마셨기 때문이다.  앨리스의 위치가 아름다운 정원으로 바뀐 이유는 앨리스가 문을 통과했기 때문이다.  
즉, 객체의 행동이 객체 자신의 상태를 변화시킨다.
이는 행동이 `부수 효과(side effect)`를 초래할 수 있다는 점을 시사한다.  

#### 협력과 행동
행동은 외부 객체의 요청(메시지)에 응답하기 위한 활동이다.  
행동은 객체 자신의 상태를 변경하거나, 다른 객체에 메시지를 전달하여 다른 객체의 상태 변경을 유발할 수도 있다.  
즉, 객체는 행동을 통해 다른 객체와의 협력에 참여하며, 행동이 다른 객체의 상태에도 영향을 줄 수 있기 때문에 행동은 외부에 가시적이어야 한다.  

#### 상태 캡슐화
객체가 자율적인 존재라면 앨리스가 음료를 마셨을때 음료의 양을 줄어드는 것은 어떻게 이해할 수 있을까?
앨리스라는 객체, 음료라는 객체는 각각 자율적인 존재이다. 따라서, 음료 객체의 양(상태)이 줄어드는 것은 음료 객체가 결정할 일이다.  
앨리스 객체가 음료를 마신다는 행동을 했을때 음료 객체에 양을 줄이라는 요청(메시지)을 전달할 뿐이다.  
또한, 앨리스 객체는 실제로 음료의 양이 줄어들었는지 아닌지 알 수 없다.  

객체는 상태를 캡슐 안에 가뭐둔 채 외부로 노출하지 않는다. 객체가 외부에 노출하는 것은 행동뿐이며, 외부에서 객체에 접근할 수 있는 유일한 방법 역시 행동뿐이다.   
... 중략
상태를 외부에 노출시키지 않고 행동을 경계로 캡슐화하는 것은 결과적으로 객체의 자율성을 높인다. (p.56)  

객체를 캡슐화하면 객체의 자율성이 높아지고, 협력을 더욱 단순하고 유연하게 만들 수 있다.  
객체지향 패러다임은 계속해서 객체의 자율성을 강조하고 있다. 따라서, 상태를 캡슐화하는 것은 객체지향이 추구하는 바를 달성하기 위한 방법이라 할 수 있겠다.  

### 식별자
객체가 식별 가능하다는 것은 객체를 서로 구별할 수 있는 특정한 프로퍼티가 객체 안에 존재한다는 것을 의미한다. 이 프로퍼티를 식별자라고 한다. (p.57)   
단순한 값은 식별자를 가지지 않지만, 객체는 식별자를 가진다.  

> 식별자란 어떤 객체를 다른 객체와 구분하는 데 사용하는 객체의 프로퍼티다. 값은 식별자를 가지지 않기 때문에 상태를 이용한 동등성 검사를 통해 두 인스턴스를 비교해야 한다. 객체는 상태가 변경될 수 있기 때문에 식별자를 이용한 동일성 검사를 통해 두 인스턴스를 비교할 수 있다. (p.58)


객체의 특성을 아래와 같이 정리한다. (p.59)
- 객체는 상태를 가지며 상태는 변경 가능하다.
- 객체의 상태를 변경시키는 것은 객체의 행동이다.
  - 행동의 결과는 상태에 의존적이며 상태를 이용해 서술할 수 있다.
  - 행동의 순서가 실행 결과에 영향을 미친다.
- 객체는 어떤 상태에 있더라도 유일하게 식별 가능하다.

## 기계로서의 객체
개발자들은 객체지향을 통해 결국 객체의 상태를 조회하고 객체의 상태를 변경하려고 한다.  
객체의 상태를 조회하는 것을 `쿼리(query)`라고 하고, 객체의 상태를 변경하는 것을 `명령(command)`이라 한다. 따라서, 객체가 외부에 제공하는 행동의 대부분은 쿼리와 명령으로 구성된다. (p.60)  

객체에 접근할 수 있는 유일한 방법은 객체가 제공하는 행동뿐이기 때문에 명령과 쿼리를 통해서만 객체에 접근할 수 있다.  
이를 통해 객체의 캡슐화를 이해할 수 있다.  

## 행동이 상태를 결정한다

자율적인 객체들은 서로 협력하기 위해 존재한다. 협력하기 위해 어떠한 행동을 한다.  
따라서, 객체지향 설계를 할때 협력에 필요한 행동을 먼저 생각하고, 해당 행동을 할 객체를 선택하는 방식이어야 한다.  
행동을 먼저 결정하고 행동에 적절한 상태를 선택한다.  

## 은유와 객체
객체지향은 단순히 현실 세계의 모방이 아니다.  

### 의인화
객체지향 패러다임의 객체는 자율적이고 능동적인 존재이다. 이는 오히려 현실 세계의 객체를 전혀 모방하지 않는다고 볼 수 있다.  
현실 속의 음료는 스스로 양을 줄어들게 할 수 없다.  
그러나, 객체지향 패러다임의 음료 객체는 외부 요청에 따라 자율적으로 양(상태)를 줄어들게 할 수 있다.  
객체지향 패러다임 속 객체는 현실의 객체보다 훨씬 더 다양한 많은 일을 할 수 있다. 이를 의인화라고 부른다.  
따라서, 객체지향 세계는 단순한 현실 세계의 모방이 아니다.  

### 은유
객체지향 세계가 현실 세계의 모방은 아니지만, 둘 사이에는 여전히 유사성이 있다.  
이를 은유의 개념으로 설명할 수 있다.  
예를 들어, 은유 관계에 있는 현실 세계 객체의 이름을 소프트웨어 객체의 이름으로 사용하면 표현적 차이를 줄여 소프트웨어의 구조를 쉽게 예측할 수 있다. (p.69)  

### 이상한 나라를 창조하라
정리하자면 객체지향 패러다임은 현실을 모방하는 것이 아니라, 현실 세계를 기반으로 새로운 소프트웨어 세계를 구축할 수 있다는 데에 의의가 있다. 

---
title:  "[코어 웹 바이탈 최적화] LCP(Largest Contentful Paint, 최대 콘텐츠풀 페인트)"
categories: 
  - 리팩토링
  - 최적화
  - 코어 웹 바이탈
tags:
  - 리팩토링
  - 최적화
toc: true
toc_sticky: true
toc_label: "LCP(Largest Contentful Paint, 최대 콘텐츠풀 페인트)"
---

## LCP(Largest Contentful Paint, 최대 콘텐츠풀 페인트)란?

로딩 성능을 측정하는 지표로서, 페이지가 처음으로 로드를 시작한 시점을 기준으로 뷰포트 내에 있는 가장 큰 이미지 또는 텍스트 블록의 렌더링 시간을 보고한다. <br>
좋은 사용 경험을 제공하기 위해서는 페이지가 처음으로 로딩된 후 ***2.5초*** 이내에 LCP 가 발생해야 한다. 
<br>
<br>
> 로딩 성능을 측정을 위해서 가장 큰 콘텐츠의 렌더링 시기를 파악하는 이유가 뭘까?
<br>
기본적으로 로딩 성능을 측정하기 위해서 load 또는 DOMContentLoaded 와 같은 메트릭을 사용하곤 했다. <br>
웹 페이지가 로딩될때 load, DOMContentLoaded 이벤트가 발생하는데 해당 이벤트가 발생하는 시점으로 성능을 측정하려 했던 것이다.
<br>
<br>
load 이벤트는 HTML 상에 필요한 모든 리소스가 로드된 시점에 발생한다. <br>
DOMContentLoaded 이벤트는 HTML과 CSS 파싱이 끝나는 시점에 발생한다. <br>
<br>

개발자 도구의 Network 패널 하단에서도 load, DOMContentLoaded 메트릭을 확인할 수 있다.
<br>
<br>
그러나, load, DOMContentLoaded 메트릭으로는 제대로된 성능을 판단하기 어려워졌다. <br>
SPA(Single Page Application)는 웹 페이지에 포함된 적은 양의 HTML로 load, DOMContentLoaded 이벤트가 일찍 발생할 수는 있지만, 해당 이벤트가 발생한 이후에 수많은 스크립트가 실행되는 '느린 로딩'이 발생할 수 있기 때문이다.

출처: [성능 최적화](https://ui.toast.com/fe-guide/ko_PERFORMANCE)


즉, load, DOMContentLoaded 메트릭은 사용자가 화면에서 보는 것과 반드시 일치하지 않을 수 있다. 
<br>
<br>
또한, FCP(First Contentful Paint, 최초 콘텐츠풀 페인트)이라는 메트릭은 로딩 경험의 '시작' 부분만을 포착하기 때문에 로딩 성능을 측정하기에 부적절하다고 판단되었다.
<br>
<br>

이외에도 Lighthouse에서 제공하는 FMP(First Meaningful Paint, 유의미한 최초 페인트) 및 SI(Speed Index, 속도 인덱스)와 같은 메트릭이 있지만, 이러한 메트릭은 복잡하고 잘못된 경우가 많아서 페이지의 메인 콘텐츠가 로드된 시점을 식별하기에 부적절하다고 한다.
<br>
<br>

따라서, 페이지에서 가장 큰 요소가 렌더링된 시기를 확인하여 페이지의 메인 콘텐츠가 로드되는 시기를 측정하고자 했다.

<br>
<br>

## 좋은 LCP 점수는 무엇일까?

LCP가 2.5초 이내에 발생하는 것이 좋다.

<br>
<br>

## LCP 측정을 위해 고려되는 요소는 무엇인가?
- <img> 요소
- <svg> 요소 내부의 <img>
- <video> 요소
- url() 함수를 통해 로드된 배경 이미지가 있는 요소
- 텍스트 노드 또는 기타 인라인 수준 텍스트 하위 요소를 포함하는 블록 수준 요소
  
<br>
<br>
  


## 요소의 크기는 어떻게 결정될까?
LCP에 대해 보고된 요소의 크기는 일반적으로 '뷰포트' 내에서 사용자에게 표시되는 크기이다. <br>
만약 요소가 뷰포트 외부로 확장되거나, 잘려서 보이지 않는 등의 경우에는 해당 부분은 요소의 크기에 포함되지 않는다. 
<br>
<br>
  
만약 기본 크기(Intrinsic size)에서 크기가 조정된 이미지 요소의 경우 보여지는 가시적 크기와 기본 크기 중 '더 작은 것'이 보고된다. <br>
예를 들어 기본 크기보다 작게 축소한 이미지라면 축소된 만큼의 크기가 보고되겠고, 기본 크기보다 크게 확장한 이미지라면 확장한 이미지보다 더 작은 기본 크기가 보고될 것이다.
  
<br>
<br>
텍스트 요소의 경우 텍스트 노드의 크기만 고려된다. 또한, 모든 요소에 대해 CSS를 통해 적용된 여백, 안쪽 여백, 테두리는 고려되지 않는다고 한다.
  
<br>
<br>
  
## LCP는 언제 보고될까?  
  
  
  
  
  

  
  
  
  
----
참고
[Web Vitals](https://web.dev/vitals/), [성능 최적화](https://ui.toast.com/fe-guide/ko_PERFORMANCE)
